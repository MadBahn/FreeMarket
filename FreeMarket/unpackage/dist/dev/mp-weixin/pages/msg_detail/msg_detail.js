"use strict";const e=require("../../common/vendor.js"),n=require("../../cfg.js"),d=e.defineComponent({__name:"msg_detail",setup(f){const o=e.ref([]),l=e.ref(!0),s=e.ref(0),r=e.ref("");e.onLoad(a=>{console.log(a),r.value=a.type,u(!0)}),e.onPullDownRefresh(()=>{console.log("pull"),u(!0)}),e.onReachBottom(()=>{l.value&&u(!1)});function u(a){a&&(s.value=0),e.index.request({url:`${n.cfg.server}:${n.cfg.port}${n.cfg.api.prefix}${n.cfg.api.user.prefix}${n.cfg.api.user.msg_detail}`,method:"POST",data:{type:r.value,receiver:getApp().globalData.login.userid,field:{amount:4,start_at:s.value}},success(t){console.log(t),t.statusCode===200&&(l.value=t.data.data.data.length===4,s.value=t.data.data.next_index,o.value=a?t.data.data.data:o.value.concat(t.data.data.data))},complete(){e.index.stopPullDownRefresh()}})}return(a,c)=>e.e({a:o.value.length!==0},o.value.length!==0?e.e({b:e.f(o.value,(t,g,_)=>({a:e.t(t.title),b:e.t(t.content),c:e.t(new Date(t.post_date).toLocaleString()),d:t.message_id})),c:!l.value},l.value?{}:{}):{})}}),i=e._export_sfc(d,[["__scopeId","data-v-f73e8808"],["__file","F:/HBuilderProjects/FreeMarket/pages/msg_detail/msg_detail.vue"]]);wx.createPage(i);
