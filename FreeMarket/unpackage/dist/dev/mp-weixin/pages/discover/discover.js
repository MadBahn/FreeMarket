"use strict";const e=require("../../common/vendor.js"),t=require("../../cfg.js");if(!Array){const p=e.resolveComponent("uni-nav-bar"),n=e.resolveComponent("uni-card");(p+n)()}const f=()=>"../../uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.js",l=()=>"../../uni_modules/uni-card/components/uni-card/uni-card.js";Math||(f+l)();const v=e.defineComponent({__name:"discover",setup(p){const n=getApp().globalData,s=e.ref([]),r=e.ref(0),c=e.ref(!0);e.onPullDownRefresh(()=>{u(!0)}),e.onReachBottom(()=>{c.value&&u(!1)}),e.onLoad(()=>{console.log("load"),u(!0)});function u(o){o&&(r.value=0);const d=4;e.index.request({url:t.cfg.server+":"+t.cfg.port+t.cfg.api.prefix+t.cfg.api.post.prefix+t.cfg.api.post.post_display,method:"POST",data:{filter:{start_at:r.value,amount:d,sub_filter:{}}},success(a){console.log(a.data),a.statusCode===200&&(c.value=a.data.data.length===d,s.value=o?a.data.data:s.value.concat(a.data.data),r.value=a.data.next_index,e.index.stopPullDownRefresh())}})}function i(o){e.index.navigateTo({url:o,animationType:"none"})}return(o,d)=>({a:e.o(a=>i("/pages/search/search?type=post")),b:e.o(a=>i("/pages/new_post/new_post")),c:e.p({leftIcon:"plusempty",statusBar:!0,fixed:!0}),d:e.f(s.value,(a,m,_)=>({a:e.t(a.title),b:e.o(b=>i("/pages/browse_post/browse_post?id="+a.post_id+"&userid="+e.unref(n).login.userid)),c:"7f6951af-1-"+_,d:e.p({cover:e.unref(t.cfg).server+":"+e.unref(t.cfg).port+"/"+a.imgs[0].url})})),e:!c.value})}}),g=e._export_sfc(v,[["__scopeId","data-v-7f6951af"],["__file","F:/HBuilderProjects/FreeMarket/pages/discover/discover.vue"]]);wx.createPage(g);
