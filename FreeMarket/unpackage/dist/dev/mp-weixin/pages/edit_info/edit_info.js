"use strict";const e=require("../../common/vendor.js"),n=require("../../cfg.js");if(!Array){const s=e.resolveComponent("t-index-address"),o=e.resolveComponent("uni-popup");(s+o)()}const r=()=>"../../uni_modules/t-index-address/components/t-index-address/t-index-address.js",d=()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js";Math||(r+d)();const p=e.defineComponent({__name:"edit_info",setup(s){e.reactive({current:new Date});const o=e.ref({}),i=e.ref(null);e.onLoad(()=>{o.value=getApp().globalData.login,console.log(o.value)});function l(a){console.log(a.detail.value),o.value.birthday=a.detail.value,console.log(o.value),console.log(o.value.birthday)}function c(a){o.value.city=`${a.province}-${a.name}`,console.log(o.value),i.value.close()}function u(a){console.log(a.detail.value),e.index.request({url:`${n.cfg.server}:${n.cfg.port}${n.cfg.api.prefix}${n.cfg.api.user.prefix}${n.cfg.api.user.modify_info}`,method:"POST",data:{modify_form:{userid:getApp().globalData.login.userid,...a.detail.value,city:o.value.city}},success(t){console.log(t),t.statusCode===200&&(getApp().globalData.login=t.data.data,e.index.setStorage({key:"user_login",data:t.data.data,complete(){e.index.$emit("user"),e.index.navigateBack(),e.index.showToast({icon:"success",title:"修改成功"})}}))}})}return(a,t)=>({a:o.value.username,b:o.value.desc,c:o.value.gender==="male",d:o.value.gender==="female",e:o.value.gender==="others",f:e.t(new Date(o.value.birthday).toLocaleDateString()),g:o.value.birthday,h:e.o(l),i:e.t(o.value.city||"没有城市"),j:e.o(()=>i.value.open()),k:e.o(u),l:e.o(c),m:e.sr(i,"176afe41-0",{k:"city_pop"}),n:e.p({type:"bottom",["background-color"]:"#fff"})})}}),_=e._export_sfc(p,[["__scopeId","data-v-176afe41"],["__file","F:/HBuilderProjects/FreeMarket/pages/edit_info/edit_info.vue"]]);wx.createPage(_);
