"use strict";const e=require("../../common/vendor.js"),t=require("../../cfg.js"),n=e.defineComponent({__name:"login",setup(g){getApp();const a=e.ref({username:"",password:""});function s(){try{e.index.request({url:t.cfg.server+":"+t.cfg.port+t.cfg.api.prefix+t.cfg.api.user.prefix+t.cfg.api.user.login,method:"POST",data:{login_form:a.value},success(o){console.log(o),o.statusCode===200?(e.index.setStorage({key:"user_login",data:o.data.data}),getApp().globalData.login=o.data.data,e.index.$emit("user"),e.index.switchTab({url:"/pages/my/my"}),e.index.showToast({icon:"success",title:"登录成功"})):e.index.showToast({icon:"error",title:"登录失败"})}})}catch(o){console.log(o)}}function i(){e.index.navigateTo({url:"/pages/register/register"})}return(o,l)=>({a:a.value.username,b:e.o(r=>a.value.username=r.detail.value),c:a.value.password,d:e.o(r=>a.value.password=r.detail.value),e:e.o(s),f:e.o(i)})}}),c=e._export_sfc(n,[["__scopeId","data-v-e4e4508d"],["__file","F:/HBuilderProjects/FreeMarket/pages/login/login.vue"]]);wx.createPage(c);
