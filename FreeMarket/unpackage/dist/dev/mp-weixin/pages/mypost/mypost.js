"use strict";const e=require("../../common/vendor.js"),s=require("../../cfg.js");if(!Array){const p=e.resolveComponent("no-more"),o=e.resolveComponent("empty");(p+o)()}const f=()=>"../../components/no-more/no-more.js",g=()=>"../../components/empty/empty.js";Math||(v+f+g)();const v=()=>"../../components/post_unit/post_unit.js",y=e.defineComponent({__name:"mypost",setup(p){const o=e.ref([]),c=e.ref(0),r=e.ref(!0);e.onLoad(()=>{u(!0)}),e.onPullDownRefresh(()=>{u(!0)}),e.onReachBottom(()=>{u(!1)});function u(a){a&&(c.value=0),e.index.request({url:`${s.cfg.server}:${s.cfg.port}${s.cfg.api.prefix}${s.cfg.api.post.prefix}${s.cfg.api.post.post_display}`,method:"POST",data:{filter:{start_at:c.value,amount:10,sub_filter:{post_by:getApp().globalData.login.userid}}},success(t){console.log(t),t.statusCode===200&&(r.value=t.data.data.length===10,c.value=t.data.next_index,o.value=a?t.data.data:o.value.concat(t.data.data))}})}function l(a){e.index.navigateTo({url:`/pages/new_post/new_post?op=modify&post_id=${a}`})}async function _(a){(await e.index.showModal({title:"警告",content:"是否继续？"})).confirm&&e.index.request({url:"",method:"POST",data:{post_id:a,userid:getApp().globalData.login.userid},success(t){t.statusCode===200&&(o.value=o.value.filter(n=>n.post_id!==a))}})}return(a,i)=>e.e({a:o.value.length!==0},o.value.length!==0?e.e({b:e.f(o.value,(t,n,d)=>({a:"afac12b0-0-"+d,b:e.p({data:t}),c:e.o(m=>l(t.post_id),n),d:e.o(m=>_(t.post_id),n),e:n})),c:!r.value},r.value?{}:{}):{})}}),h=e._export_sfc(y,[["__scopeId","data-v-afac12b0"],["__file","F:/HBuilderProjects/FreeMarket/pages/mypost/mypost.vue"]]);wx.createPage(h);
