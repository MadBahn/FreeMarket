"use strict";const t=require("../../common/vendor.js"),s=require("../../cfg.js");Math||_();const _=()=>"../../components/post_unit/post_unit.js",g=t.defineComponent({__name:"mypost",setup(v){const a=t.ref([]),u=t.ref(0),r=t.ref(!0);t.onLoad(()=>{i(!0)}),t.onPullDownRefresh(()=>{i(!0)}),t.onReachBottom(()=>{i(!1)});function i(o){o&&(u.value=0),t.index.request({url:`${s.cfg.server}:${s.cfg.port}${s.cfg.api.prefix}${s.cfg.api.post.prefix}${s.cfg.api.post.post_display}`,method:"POST",data:{filter:{start_at:u.value,amount:10,sub_filter:{post_by:getApp().globalData.login.userid}}},success(e){console.log(e),e.statusCode===200&&(r.value=e.data.data.length===10,u.value=e.data.next_index,a.value=o?e.data.data:a.value.concat(e.data.data))}})}function d(o){t.index.navigateTo({url:`/pages/new_post/new_post?op=modify&post_id=${o}`})}async function p(o){(await t.index.showModal({title:"警告",content:"是否继续？"})).confirm&&t.index.request({url:"",method:"POST",data:{post_id:o,userid:getApp().globalData.login.userid},success(e){e.statusCode===200&&(a.value=a.value.filter(n=>n.post_id!==o))}})}return(o,c)=>({a:t.f(a.value,(e,n,l)=>({a:"4fee961c-0-"+l,b:t.p({data:e}),c:t.o(f=>d(e.post_id),n),d:t.o(f=>p(e.post_id),n),e:n})),b:!r.value})}}),m=t._export_sfc(g,[["__file","F:/HBuilderProjects/FreeMarket/pages/mypost/mypost.vue"]]);wx.createPage(m);
