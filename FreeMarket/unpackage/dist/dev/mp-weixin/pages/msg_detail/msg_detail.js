"use strict";const e=require("../../common/vendor.js"),n=require("../../cfg.js");if(!Array){const l=e.resolveComponent("no-more"),a=e.resolveComponent("empty");(l+a)()}const _=()=>"../../components/no-more/no-more.js",d=()=>"../../components/empty/empty.js";Math||(_+d)();const i=e.defineComponent({__name:"msg_detail",setup(l){const a=e.ref([]),s=e.ref(!0),c=e.ref(0),u=e.ref("");e.onLoad(o=>{console.log(o),u.value=o.type,r(!0)}),e.onPullDownRefresh(()=>{console.log("pull"),r(!0)}),e.onReachBottom(()=>{s.value&&r(!1)});function r(o){o&&(c.value=0),e.index.request({url:`${n.cfg.server}:${n.cfg.port}${n.cfg.api.prefix}${n.cfg.api.user.prefix}${n.cfg.api.user.msg_detail}`,method:"POST",data:{type:u.value,receiver:getApp().globalData.login.userid,field:{amount:4,start_at:c.value}},success(t){console.log(t),t.statusCode===200&&(s.value=t.data.data.data.length===4,c.value=t.data.data.next_index,a.value=o?t.data.data.data:a.value.concat(t.data.data.data))},complete(){e.index.stopPullDownRefresh()}})}return(o,m)=>e.e({a:a.value.length!==0},a.value.length!==0?e.e({b:e.f(a.value,(t,f,g)=>({a:e.t(t.title),b:e.t(t.content),c:e.t(new Date(t.post_date).toLocaleString()),d:t.message_id})),c:!s.value},s.value?{}:{}):{})}}),p=e._export_sfc(i,[["__scopeId","data-v-f73e8808"],["__file","F:/HBuilderProjects/FreeMarket/pages/msg_detail/msg_detail.vue"]]);wx.createPage(p);
