"use strict";const o=require("../../common/vendor.js"),a=require("../../cfg.js");Array||o.resolveComponent("no-more")();const p=()=>"../../components/no-more/no-more.js";Math||(m+p)();const m=()=>"../../components/goods_unit/goods_unit.js",v=o.defineComponent({__name:"mygoods",setup(g){const n=o.ref([]),c=o.ref(0),r=o.ref(!0);o.onLoad(()=>{i(!0)}),o.onPullDownRefresh(()=>{i(!0)}),o.onReachBottom(()=>{r.value&&i(!1)});function i(t){console.log(getApp().globalData.login.userid),t&&(c.value=0);const s=4;o.index.request({url:a.cfg.server+":"+a.cfg.port+a.cfg.api.prefix+a.cfg.api.goods.prefix+a.cfg.api.goods.goods_display,method:"POST",data:{filter:{start_at:c.value,amount:s,sub_filter:{owner:getApp().globalData.login.userid}}},success(e){console.log(e),e.statusCode===200&&(n.value=t?e.data.data.data:n.value.concat(e.data.data.data),r.value=e.data.data.data.length===e.data.data.next_index,c.value=e.data.data.next_index)}})}async function l(t){const s=await o.index.showModal({title:"警告",content:"是否继续？"});console.log(s),s.confirm&&o.index.request({url:`${a.cfg.server}:${a.cfg.port}${a.cfg.api.prefix}${a.cfg.api.goods.prefix}${a.cfg.api.goods.remove_goods}`,method:"POST",data:{goods_id:t,userid:getApp().globalData.login.userid},success(e){console.log(e),e.statusCode===200&&(n.value=n.value.filter(d=>d.goods_id!==t))}})}function u(t){o.index.navigateTo({url:`/pages/new_goods/new_goods?operation=modify&goods_id=${t}`})}return(t,s)=>o.e({a:o.f(n.value,(e,d,f)=>({a:"6e76d5f0-0-"+f,b:o.p({data:e}),c:o.o(_=>u(e.goods_id),d),d:o.o(_=>l(e.goods_id),d),e:d})),b:!r.value},r.value?{}:{})}}),x=o._export_sfc(v,[["__file","F:/HBuilderProjects/FreeMarket/pages/mygoods/mygoods.vue"]]);wx.createPage(x);
