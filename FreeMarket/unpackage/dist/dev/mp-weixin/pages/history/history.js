"use strict";const e=require("../../common/vendor.js"),s=require("../../cfg.js");if(!Array){const l=e.resolveComponent("uni-segmented-control"),o=e.resolveComponent("history-unit");(l+o)()}const v=()=>"../../uni_modules/uni-segmented-control/components/uni-segmented-control/uni-segmented-control.js",m=()=>"../../components/history-unit/history-unit.js";Math||(v+m)();const y=e.defineComponent({__name:"history",setup(l){const o=e.ref([]),c=e.ref(0),n=e.ref("goods"),r=e.ref(0),d=e.ref(["商 品","帖 子"]),i=e.ref(!0);e.onLoad(()=>{u(!0)}),e.onPullDownRefresh(()=>{u(!0)}),e.onReachBottom(()=>{i.value&&u(!1)});function f(a){r.value=a.currentIndex,r.value===0?n.value="goods":r.value===1&&(n.value="post"),console.log(n.value),u(!0)}function u(a){a&&(c.value=0),e.index.request({url:s.cfg.server+":"+s.cfg.port+s.cfg.api.prefix+s.cfg.api.user.prefix+s.cfg.api.user.get_history,method:"POST",data:{filter:{userid:getApp().globalData.login.userid,type:n.value,query:{userid:getApp().globalData.login.userid,history_to:n.value},start_at:c.value,count:5}},success(t){console.log(t),t.statusCode===200&&(i.value=t.data.data.length===5,a?o.value=t.data.data:(o.value=o.value.concat(t.data.data),c.value=t.data.next_index))},complete(){e.index.stopPullDownRefresh()}})}return(a,_)=>({a:e.o(f),b:e.p({current:r.value,styleType:"text",values:d.value}),c:e.f(o.value,(t,g,p)=>({a:"b2d018fa-1-"+p,b:e.p({type:n.value,data:t}),c:g})),d:!i.value})}}),h=e._export_sfc(y,[["__scopeId","data-v-b2d018fa"],["__file","F:/HBuilderProjects/FreeMarket/pages/history/history.vue"]]);wx.createPage(h);
