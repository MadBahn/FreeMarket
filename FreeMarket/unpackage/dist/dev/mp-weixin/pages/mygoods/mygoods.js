"use strict";const o=require("../../common/vendor.js"),t=require("../../cfg.js");Math||_();const _=()=>"../../components/goods_unit/goods_unit.js",p=o.defineComponent({__name:"mygoods",setup(m){const d=o.ref([]),i=o.ref(0),g=o.ref(!0);o.onLoad(()=>{r(!0)}),o.onPullDownRefresh(()=>{r(!0)}),o.onReachBottom(()=>{g.value&&r(!1)});function r(a){console.log(getApp().globalData.login.userid),a&&(i.value=0);const n=4;o.index.request({url:t.cfg.server+":"+t.cfg.port+t.cfg.api.prefix+t.cfg.api.goods.prefix+t.cfg.api.goods.goods_display,method:"POST",data:{filter:{start_at:i.value,amount:n,sub_filter:{owner:getApp().globalData.login.userid}}},success(e){console.log(e),e.statusCode===200&&(d.value=a?e.data.data.data:d.value.concat(e.data.data.data),g.value=e.data.data.data.length===e.data.data.next_index,i.value=e.data.data.next_index)}})}async function c(a){const n=await o.index.showModal({title:"警告",content:"是否继续？"});console.log(n),n.confirm&&o.index.request({url:`${t.cfg.server}:${t.cfg.port}${t.cfg.api.prefix}${t.cfg.api.goods.prefix}${t.cfg.api.goods.remove_goods}`,method:"POST",data:{goods_id:a,userid:getApp().globalData.login.userid},success(e){console.log(e),e.statusCode===200&&(d.value=d.value.filter(s=>s.goods_id!==a))}})}function u(a){o.index.navigateTo({url:`/pages/new_goods/new_goods?operation=modify&goods_id=${a}`})}return(a,n)=>({a:o.f(d.value,(e,s,l)=>({a:"6e76d5f0-0-"+l,b:o.p({data:e}),c:o.o(f=>u(e.goods_id),s),d:o.o(f=>c(e.goods_id),s),e:s})),b:!g.value})}}),v=o._export_sfc(p,[["__file","F:/HBuilderProjects/FreeMarket/pages/mygoods/mygoods.vue"]]);wx.createPage(v);
