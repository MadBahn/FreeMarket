"use strict";const e=require("../../common/vendor.js"),a=require("../../cfg.js");if(!Array){const i=e.resolveComponent("uni-nav-bar"),t=e.resolveComponent("uni-card");(i+t)()}const x=()=>"../../uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.js",w=()=>"../../uni_modules/uni-card/components/uni-card/uni-card.js";Math||(x+w)();const $=e.defineComponent({__name:"index",setup(i){const t=e.ref(!0),v=getApp(),r=e.ref([]),g=e.ref([]),s=e.ref(0),c=e.ref(!0);e.onLoad(()=>{u(!0),f(),console.log("globalData:",v.globalData)}),e.onShow(()=>{console.log("onShow"),t.value=!0,console.log(t.value)}),e.onHide(()=>{console.log("onHide"),t.value=!1,console.log(t.value)}),e.onReachBottom(()=>{console.log("reach bottom"),c.value&&u(!1)}),e.onPullDownRefresh(()=>{console.log("pull down refresh"),f(),u(!0)});function u(n){n&&(s.value=0);const d=4;e.index.request({url:"http://localhost:4000/api/goods/goods_display",method:"POST",data:{filter:{start_at:s.value,amount:d,sub_filter:{}}},success(o){console.log(o.data.data),o.statusCode===200&&(c.value=o.data.data.data.length===d,r.value=n?o.data.data.data:r.value.concat(o.data.data.data),s.value=o.data.data.next_index,console.log(s.value),e.index.stopPullDownRefresh())}})}function f(){e.index.request({url:`${a.cfg.server}:${a.cfg.port}${a.cfg.api.prefix}${a.cfg.api.goods.prefix}${a.cfg.api.goods.hot_goods}`,method:"POST",success(n){n.statusCode===200&&(g.value=n.data)}})}function _(n){e.index.navigateTo({url:"/pages/browse_goods/browse_goods?id="+n.goods_id+"&userid="+getApp().globalData.login.userid})}function m(){e.index.navigateTo({url:"/pages/search/search?type=goods",animationType:"none"})}function h(){e.index.navigateTo({url:"/pages/new_goods/new_goods?operation=new"})}return(n,d)=>({a:e.o(m),b:e.o(h),c:e.p({leftIcon:"plusempty",statusBar:!0,fixed:!0}),d:e.f(g.value,(o,l,p)=>({a:`${e.unref(a.cfg).server}:${e.unref(a.cfg).port}/${o.imgs[0].url}`,b:e.t(o.price),c:e.o(b=>_(o))})),e:e.f(r.value,(o,l,p)=>({a:e.t(o.goods_name),b:e.t(o.price),c:e.o(b=>_(o),l),d:l,e:"1cf27b2a-1-"+p,f:e.p({cover:e.unref(a.cfg).server+":"+e.unref(a.cfg).port+"/"+o.imgs[0].url||""})})),f:!c.value})}}),y=e._export_sfc($,[["__scopeId","data-v-1cf27b2a"],["__file","F:/HBuilderProjects/FreeMarket/pages/index/index.vue"]]);wx.createPage(y);
