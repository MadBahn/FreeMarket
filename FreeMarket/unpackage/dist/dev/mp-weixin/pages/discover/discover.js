"use strict";const e=require("../../common/vendor.js"),n=require("../../cfg.js");if(!Array){const d=e.resolveComponent("uni-nav-bar"),r=e.resolveComponent("uni-card"),a=e.resolveComponent("no-more");(d+r+a)()}const l=()=>"../../uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.js",f=()=>"../../uni_modules/uni-card/components/uni-card/uni-card.js",m=()=>"../../components/no-more/no-more.js";Math||(l+f+m)();const v=e.defineComponent({__name:"discover",setup(d){const r=getApp().globalData,a=e.ref([]),c=e.ref(0),s=e.ref(!0);e.onPullDownRefresh(()=>{u(!0)}),e.onReachBottom(()=>{s.value&&u(!1)}),e.onLoad(()=>{console.log("load"),u(!0)});function u(t){t&&(c.value=0);const _=4;e.index.request({url:n.cfg.server+":"+n.cfg.port+n.cfg.api.prefix+n.cfg.api.post.prefix+n.cfg.api.post.post_display,method:"POST",data:{filter:{start_at:c.value,amount:_,sub_filter:{}}},success(o){console.log(o.data),o.statusCode===200&&(s.value=o.data.data.length===_,a.value=t?o.data.data:a.value.concat(o.data.data),c.value=o.data.next_index,e.index.stopPullDownRefresh())}})}function i(t){e.index.navigateTo({url:t,animationType:"none"})}return(t,_)=>e.e({a:e.o(o=>i("/pages/search/search?type=post")),b:e.o(o=>i("/pages/new_post/new_post")),c:e.p({leftIcon:"plusempty",statusBar:!0,fixed:!0}),d:e.f(a.value,(o,b,p)=>({a:e.t(o.title),b:e.o(x=>i("/pages/browse_post/browse_post?id="+o.post_id+"&userid="+e.unref(r).login.userid)),c:"7f6951af-1-"+p,d:e.p({cover:e.unref(n.cfg).server+":"+e.unref(n.cfg).port+"/"+o.imgs[0].url})})),e:!s.value},s.value?{}:{})}}),g=e._export_sfc(v,[["__scopeId","data-v-7f6951af"],["__file","F:/HBuilderProjects/FreeMarket/pages/discover/discover.vue"]]);wx.createPage(g);
